apiVersion: sro.openshift.io/v1beta1
kind: SpecialResource
metadata:
  name: auristor-client
spec:
  namespace: auristor-client
  debug: false
  chart:
    name: auristor-client
    version: 0.0.1
    repository:
      name: example
      url: cm://auristor-client/auristor-client-chart
      # It is possible to deploy from local files instead of creating ConfigMap
      # This approach is not recommended
      # url: file:///charts
  set:
    kind: Values
    apiVersion: sro.openshift.io/v1beta1
    kmodNames: ["yfs"]
    buildArgs:
    - name: "KMOD_SOFTWARE_VERSION"
      value: "\"2021.05\""
    - name: "KMOD_RELEASE"
      value: "\"12\""
    auristorRegistry: "registry.gitlab.com/justinlukin/cr"
    auristorVersion: "2021.05-15"
    kmodDriverContainer:
      yfsCache: /var/cache/yfs
      directories:
        - label: etc-yfs
          target: /etc/yfs
          files:
            yfs-client.conf: |
              # This Comment is required (at this indenting) to satisfy helm indenting
                  # Insert yfs-client.conf contents here (at this indenting)

                  # This merges the grand.central.org [cells] section:
                  include /usr/share/yfs/cellservdb.conf
                  # includedir /etc/yfs/yfs-client.conf.d

                  [defaults]
                  # You need to set a thiscell here
                    thiscell = your-file-system.com

                  [afsd]
                      blocks = 100000
                      debug = yes
                      # memcache = yes
                      nomount = yes

                  [cells]
                  # You may define your own cells here.
            other: |
              # This Comment is required (at this indenting) to satisfy helm indenting
                  # Insert yfs-client.conf contents here (at this indenting)
                  This is something else      
        - label: usr-share-yfs
          target: /usr/share/yfs
          files:
            cellservdb.conf: |
              # This Comment is required (at this indenting) to satisfy helm indenting
                  # AuriStorFS cellservdb client configuration
                  # 1 March 2021
                  #
                  # This file should be placed in the yfs-client.conf.d directory
                  # or be included from within the yfs-client.conf file.

                  [cells]
                    # umich.edu imported from AFSDB
                    umich.edu = {
                      description = "University of Michigan - Campus"
                      use_dns = yes
                      servers = {
                        fear.ifs.umich.edu = {
                          address = 141.211.1.32
                        }
                        surprise.ifs.umich.edu = {
                          address = 141.211.1.33
                        }
                        ruthless.ifs.umich.edu = {
                          address = 141.211.1.34
                        }
                      }
                    }


  driverContainer:
    source:
      git:
        # uri: "https://github.com/GerrySeidman/kvc-auristor-client.git"
        # ref: "fixing-repo"
        uri: "https://github.com/dariaphoebe/kvc-auristor-client.git"
        ref: "main"
    # artifacts:
    #   hostpaths:
    #     - sourcePath: "/tmp/sro-artifact"
    #     - destinationDir: "/tmp/sro-artifact"
