#!/bin/bash

echo === Deploying Auristor Special Resource ===

NAMESPACE=${NAMESPACE:-"auristor-client"}

echo NAMESPACE: $NAMESPACE

# Create namespace 
if oc get namespace $NAMESPACE >/dev/null; then
  echo namespace $NAMESPACE already exists
else
  oc create namespace auristor-client 
fi 

# Create ConfigMap object
oc delete -n $NAMESPACE cm auristor-client-chart --ignore-not-found=true
oc create -n $NAMESPACE cm auristor-client-chart --from-file=charts/cm/index.yaml --from-file=charts/cm/auristor-client-0.0.1.tgz 


oc create -n $NAMESPACE -f charts/auristor-client.yaml
